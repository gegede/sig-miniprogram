<!--pages/meeting/meeting.wxml-->
<view class="container {{iphoneX?'container-x':''}}">
  <view class="input-wraper">
      <input placeholder="搜索会议" class="keyword" bindinput="search">
        <image src="./../../static/common/search-icon.svg" class="search-icon" />
      </input>
      
      <view class="filter-wraper" bindtap="filterSig">
        <text>{{curFilterSigName}}</text>
        <image src="./../../static/common/arrow-down.svg" />
      </view>
  </view>
  <view class="list">
    <block wx:for="{{list}}" wx:key="index">
      
      <van-swipe-cell right-width="{{ (level==3)||(level==2&&item.user_id==userId) ? 135 : 67.5 }}" async-close="{{true}}" bind:close="onClose">
        <view class="item" bindtap="toDetail" data-id="{{item.id}}">
          <view class="name">
            {{item.topic}}
          </view>
          <view class="date">
            <image src="./../../static/index/date.svg"></image>
            <text>{{item.date}} {{item.start}}-{{item.end}}</text>
          </view>
          <view class="sig-name">
            <image src="./../../static/index/group.svg"></image>
            <text>{{item.group_name}}</text>
          </view>
          <view class="desc">
            <image src="./../../static/index/desc.svg"></image>
            <text>{{item.agenda}}</text>
          </view>
        </view>
        <view slot="right" class="slot" style="width: {{(level==3)||(level==2&&item.user_id==userId)?'135px':'67.5px'}}">
          <text bindtap="getAddr" class="get-addr" data-id="{{item.mid}}" data-addr="{{item.join_url}}">获取地址</text>
          <text wx:if="{{(level==3)||(level==2&&item.user_id==userId)}}" bindtap="delMeeting" class="del-meeting" data-id="{{item.mid}}">删除</text>
        </view>
      </van-swipe-cell>
    </block>
  </view>
  <view class="empty-status" wx:if="{{!list.length}}">
    <view class="suc-wrapper">
      <image src="./../../static/meeting/no-meeting.png"/>
      <text>暂无会议！</text>
      <text>当前暂无任何会议哦</text>
    </view>
  </view>
    <van-popup
    show="{{ popShow }}"
    round
    position="bottom"
    bind:click-overlay="popCancel"
  >
    <view class="sig-pop-wrapper">
      <van-picker columns="{{ columns }}" value-key="group_name" bind:change="pickerChange" />
      <view class="btn-wrapper">
        <button class="confirm" bindtap="popConfirm">确定</button>
        <button class="cancel" bindtap="popCancel">取消</button>
      </view>
    </view>
    
  </van-popup>
    <van-dialog
    use-slot
    title="Zoom会议"
    show-confirm-button="{{false}}"
    show-cancel-button="{{false}}"
    show="{{ showDialog }}"
    class-name="sig-dialog"
    close-on-click-overlay="{{true}}"
  >
      <view class="dialog-slot-content">
        <text>{{curMid}}</text>
        <text>{{curJoinUrl}}</text>
        <view>
          <button bindtap="copyLink">复制链接</button>
          <button bindtap="copyId">复制ID</button>
          <button bindtap="closeDialog">关闭</button>
        </view>
        
      </view>
  </van-dialog>
  <van-dialog
    use-slot
    title="提示"
    show-confirm-button="{{false}}"
    show-cancel-button="{{false}}"
    show="{{ showDialogDel }}"
    class-name="sig-dialog"
  >
      <view class="dialog-slot-content">
        <text>请确认删除当前会议</text>
        <view>
          <button bindtap="del">删除</button>
          <button bindtap="delCancel">取消</button>
        </view>
        
      </view>
  </van-dialog>
</view>
